import{d as f,c as a,F as S,r as L,a as r,b as p,o as i,n as A,e as h,w as y,t as l,f as c,g as C,h as M,i as R,j as N,k as j,l as B}from"./vendor.74a16cd3.js";const O=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function n(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerpolicy&&(d.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?d.credentials="include":t.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(t){if(t.ep)return;t.ep=!0;const d=n(t);fetch(t.href,d)}};O();const v=60,g=v*60,k=g*24,P=k*30;function $(e){return Math.round(Math.abs(e))}function b(e){const n=Date.now()/1e3-e;if(n<=v)return $(n)+" seconds";if(n<g){const t=$(n/v);return t+" min"+(t===1?"":"s")}if(n<k){const t=$(n/g);return t+" hr"+(t===1?"":"s")}if(n<P){const t=$(n/k);return t+" day"+(t===1?"":"s")}return new Date(e*1e3).toLocaleString()}const U=()=>"standalone"in window.navigator&&window.navigator.standalone;var _=(e,o)=>{const n=e.__vccOpts||e;for(const[u,t]of o)n[u]=t;return n};const V=f({name:"Stories",data(){return{stories:[]}},methods:{loadStory(){fetch("/api/topstories?"+new URLSearchParams({offset:this.stories.length.toString()})).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>this.stories.push(...e))},refreshStories(){this.stories=[],this.loadStory()},isActiveStory(e){return this.$route.params.item===e.id.toString()},dateToText(e){return b(e)}},mounted(){this.loadStory()}}),I={class:"stories"},E={class:"info"},z={class:"link"},F={key:0},W={class:"numcomments"},q={class:"points"},G=r("div",null,"Load More",-1),J=[G];function K(e,o,n,u,t,d){const m=p("router-link");return i(),a("div",I,[(i(!0),a(S,null,L(e.stories,s=>(i(),a("div",{key:s.id,class:A({storywrapper:!0,active:e.isActiveStory(s)})},[h(m,{to:{name:"reader",params:{item:s.id}},class:"story"},{default:y(()=>[r("h3",null,l(s.title),1),r("div",E,l(s.by)+" "+l(e.dateToText(s.time)),1),r("div",z,l(s.url),1),s.type==="job"?(i(),a("div",F,"Job")):c("",!0)]),_:2},1032,["to"]),h(m,{to:{name:"comments",params:{item:s.id}},class:"storycomments"},{default:y(()=>[r("div",W,l(s.descendants),1),r("div",q,l(s.score),1)]),_:2},1032,["to"])],2))),128)),r("div",{class:"load-more storywrapper",onClick:o[0]||(o[0]=(...s)=>e.loadStory&&e.loadStory(...s))},J)])}var Y=_(V,[["render",K]]);const Q=f({components:{Stories:Y},data(){return{message:"ffd Vue"}},methods:{refresh(){this.$refs.stories.refreshStories()}}}),X={id:"mainwrapper"},Z={id:"sidebar"},x={id:"sidebar-header"},ee=C("i"),te=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},[r("g",{fill:"currentColor"},[r("path",{d:"M32.5 5a27.3 27.3 0 00-14.7 4.28l-5.75-5.75v16.11h16.11l-6.4-6.4a21.83 21.83 0 0110.74-2.81A22.1 22.1 0 0154.57 32.5c0 2.9-.57 5.66-1.6 8.2l4.74 2.76A27.53 27.53 0 0032.5 5zM43.23 51.75a21.82 21.82 0 01-10.73 2.82A22.1 22.1 0 0110.43 32.5c0-2.74.52-5.35 1.44-7.77l-4.73-2.85A27.53 27.53 0 0032.5 60c5.4 0 10.43-1.58 14.7-4.29l5.75 5.76V45.36H36.84l6.39 6.39z"})])],-1),oe=[te],re={id:"mainpane"},ne=r("div",{id:"mainpane-header"},null,-1),se=r("header",null,null,-1);function ie(e,o,n,u,t,d){const m=p("router-link"),s=p("Stories"),D=p("router-view");return i(),a("div",X,[r("section",Z,[r("div",x,[h(m,{to:{name:"about"}},{default:y(()=>[ee]),_:1}),r("button",{class:"refresh",onClick:o[0]||(o[0]=(...H)=>e.refresh&&e.refresh(...H))},oe)]),h(s,{ref:"stories"},null,512)]),r("section",re,[ne,h(D),se])])}var ae=_(Q,[["render",ie]]);const de=f({name:"About"});function le(e,o,n,u,t,d){return i(),a("div",null," ABOUT ")}var ue=_(de,[["render",le]]);const me=f({name:"Comment",props:{item:{},originalAuthor:String,firstLayer:{type:Boolean,default:()=>!1},textPost:{type:Boolean,default:()=>!1}},data(){return{collapsed:!1}},computed:{prettyTime(){return this.item?b(this.item.time):""}},methods:{toogleCollapse(){this.collapsed=!this.collapsed}}}),ce={key:0},he={class:"author"},pe={class:"time"},fe={key:0},_e=["innerHTML"];function $e(e,o,n,u,t,d){const m=p("comment",!0);return e.item&&!e.item.deleted?(i(),a("div",ce,[e.firstLayer?c("",!0):(i(),a("div",{key:0,class:A({comment:!0,fromauthor:e.item.by===e.originalAuthor,textpost:e.textPost,dead:e.item.dead})},[r("div",{class:"comment-header",onClick:o[0]||(o[0]=(...s)=>e.toogleCollapse&&e.toogleCollapse(...s))},[r("div",he,l(e.item.by),1),r("div",pe,l(e.prettyTime),1),e.item.dead?(i(),a("div",fe,"[dead]")):c("",!0)]),e.collapsed?c("",!0):(i(),a("div",{key:0,class:"text",innerHTML:e.item.text},null,8,_e))],2)),!e.collapsed&&!e.textPost?(i(!0),a(S,{key:1},L(e.item.kids,s=>(i(),a("div",{key:s.id,class:"kids"},[h(m,{item:s,"original-author":e.originalAuthor},null,8,["item","original-author"])]))),128)):c("",!0)])):c("",!0)}var ye=_(me,[["render",$e]]);const ve=f({name:"Header",props:{item:{}},computed:{hnURL(){return this.item?"https://news.ycombinator.com/item?id="+this.item.id:"#"},prettyTime(){return this.item?b(this.item.time):""}}}),ge={key:0,class:"item-header"},ke={key:0},we=["href"],be=["href"];function Se(e,o,n,u,t,d){return e.item?(i(),a("div",ge,[r("h2",null,[e.item.dead?(i(),a("span",ke,"[dead]")):c("",!0),C(" "+l(e.item.title),1)]),r("div",null,[r("span",null,l(e.item.score),1),r("span",null,l(e.item.by),1),r("span",null,l(e.prettyTime),1),r("span",null,l(e.item.descendants),1)]),r("a",{href:e.item.url},l(e.item.url),9,we),r("a",{href:e.hnURL},l(e.hnURL),9,be)])):c("",!0)}var Le=_(ve,[["render",Se]]);const Ae=f({name:"Comments",props:{item:String},data(){return{story:{},loading:!1}},methods:{loadComments(e){typeof e=="undefined"&&(e=this.item),this.loading=!0,fetch("/api/item/"+e).then(o=>o.ok?o.json():Promise.reject(o)).then(o=>this.story=o).then(o=>{const n=document.getElementById("comments");n&&(console.log(n),n.scrollTop=0),this.loading=!1,document.title=this.story.title})}},mounted(){this.loadComments()},components:{Header:Le,comment:ye},watch:{"$route.params.item":function(e){this.loadComments(e)}}}),Ce={id:"comments"},Te={key:1};function De(e,o,n,u,t,d){const m=p("Header"),s=p("comment");return i(),a("div",Ce,[h(m,{item:e.story},null,8,["item"]),e.story.url?c("",!0):(i(),M(s,{key:0,item:e.story,"original-author":e.story.by,"text-post":!0},null,8,["item","original-author"])),e.loading?(i(),a("div",Te,"LOADING")):c("",!0),h(s,{item:e.story,"original-author":e.story.by,"first-layer":!0},null,8,["item","original-author"])])}var He=_(Ae,[["render",De]]);const Me=f({name:"Reader",props:{item:String},data(){return{readerData:{},loading:!1}},methods:{loadReader(e){typeof e=="undefined"&&(e=this.item),this.loading=!0,fetch("/api/read/"+e).then(o=>o.ok?o.json():Promise.reject(o)).then(o=>this.readerData=o).then(o=>{this.loading=!1,document.title=this.readerData.title})}},mounted(){this.loadReader()},computed:{prettyDate(){return this.readerData?new Date(this.readerData.date).toLocaleString():""},prettyAuthors(){return!this.readerData||!this.readerData.authors?"":this.readerData.authors.join(", ")}},watch:{"$route.params.item":function(e){this.loadReader(e)}}}),Re={class:"reader"},Ne={key:0},je={key:1},Be=["innerHTML"];function Oe(e,o,n,u,t,d){return i(),a("div",Re,[e.loading?(i(),a("div",Ne,"loading article")):c("",!0),r("h1",null,l(e.readerData.title),1),e.loading?c("",!0):(i(),a("div",je,l(e.prettyDate),1)),r("div",null,l(e.prettyAuthors),1),r("div",{class:"reader-html",innerHTML:e.readerData.html},null,8,Be)])}var Pe=_(Me,[["render",Oe]]);let w;U()?w=R():w=N();const Ue=j({history:w,routes:[{path:"/",name:"about",component:ue},{path:"/comments/:item",name:"comments",component:He,props:!0},{path:"/read/:item",name:"reader",component:Pe,props:!0}]});const T=B(ae);T.use(Ue);T.mount("#app");
